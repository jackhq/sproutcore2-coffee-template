<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>

  <!-- Basic Page Needs
  ================================================== -->
  <meta charset="utf-8">
  <title>Your Page Title Here :)</title>
  <meta name="description" content="">
  <meta name="author" content="">
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <!-- Mobile Specific Metas
  ================================================== -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- CSS
  ================================================== -->
  <link rel="stylesheet" href="stylesheets/base.css">
  <link rel="stylesheet" href="stylesheets/skeleton.css">
  <link rel="stylesheet" href="stylesheets/layout.css">

  <!-- Favicons
  ================================================== -->
  <link rel="shortcut icon" href="images/favicon.ico">
  <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">

</head>
<body>



  <!-- Primary Page Layout
  ================================================== -->

  <!-- Delete everything in this .container and get started on your own site! -->

  <div class="container">
    <div class="two-thirds column">
      <h3>Resident Medication Administration Record</h3>
      <script type='text/html'>
      {{#collection contentBinding="ResidentsShow.residentsController" tagName="ul"}}
        <div style='width:100%'>
          <div style='float:left;'>
            <img src='x' style='height:50px;width:50px;'></img>
            <div>Current Status: <br/> LTC</div>
          </div>
          <div style='width: 80%;float:right;'>
            <h4>{{content.name}} ({{content.dob}}) {{content.gender}}</h4>
            <h5>{{content.unit}} - {{content.wing}} - Room#&nbsp;{{content.room}}  {{content.bed}}</h5>
            <h5>Primary Dx: Congestive Heart Failure(178.00)</h5>
            <h5>Secondary Dx: Asthmal(299.00)</h5>
          </div>
        </div>
      {{/collection}}
      </script>
      <hr />
      <script type='text/html'>
      {{#collection contentBinding="ResidentsShow.timesofDayController" tagName="ul"}}
        {{content.title}}
        {{#each contentBinding='meds'}}
          {{content.name}}
        {{/each}}
      {{/collection}}
      </script>


      <hr />
      <p>Patient Info Here</p>
      <p>Current MAR Medications and Orders</p>
      <p>
        Early Morning
        <p>PRNs</p>
      </p>
      <p>Morning</p>
      <p>Noon</p>
      <p>Evening</p>
      <p>Other</p>

    </div>
    <div class="one-third column">
      <div style='margin-left: 10px;'>
        <p>Current Administrator</p>
        <h4>User Name</h4>
        <hr></hr>
        <p>Allergies</p>
        <p style='margin:0;padding:0;margin-left: 10px;'>No Known Allergies</p>
        <hr></hr>
        <p>On Hold Meds</p>
        <hr></hr>
        <p>Discontinued Meds</p>
      </div>
    </div>

  </div><!-- container -->



  <!-- JS
  ================================================== -->
  <script src="javascripts/jquery-1.6.1.min.js" type="text/javascript" charset="utf-8"></script>
  
  <script src="javascripts/sugar-0.9.4.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="javascripts/tabs.js"></script>
  <script src="javascripts/sproutcore-2.0.beta.3.min.js" type="text/javascript" charset="utf-8"></script>
  <script src="javascripts/coffee-script.js" type="text/javascript" charset="utf-8"></script>
  <script src="javascripts/Faker.js" type="text/javascript" charset="utf-8"></script>

  <script type='text/coffeescript'>
    window.ResidentsShow = SC.Application.create()
    # Models
    ResidentsShow.Resident = SC.Object.extend
      id: null
      name: null
      dob: null
      gender: null
      unit: null
      wing: null
      room: null
      bed: null


    ResidentsShow.Medication = SC.Object.extend
      id: null
      resident_id: null
      name: null
    
    ResidentsShow.TimeOfDay = SC.Object.extend
      title: null

    # Controllers
    ResidentsShow.residentsController = SC.ArrayProxy.create
      content: []
      createResident: (id, name, dob, gender, unit, wing, room, bed) ->
        this.pushObject ResidentsShow.Resident.create
          id: id
          name: name
          dob: dob
          gender: gender
          unit: unit
          wing: wing
          room: room
          bed: bed

    ResidentsShow.medicationsController = SC.ArrayProxy.create
      content: []
      createMedication: (id, resident_id, name) ->
        this.pushObject ResidentsShow.Medication.create
          id: id
          resident_id: resident_id
          name: name
    ResidentsShow.timesofDayController = SC.ArrayProxy.create
      content: []
      createTOD: (title) ->
        this.pushObject ResidentsShow.TimeOfDay.create({title: title})
      

    # views



    # Random Units
    genders = -> ["M","F"]

    units = -> ["Unit 1","Unit 2","Concelman"]
    wings = -> ["Hall A", "Hall B"]
    rooms = -> [1,2,3,4,5,6,7,8]
    beds = -> ['Private', 'A','B']
    
    for tod in ['Early Morning', 'Morning','Noon','Evening','Bedtime','Other']
      ResidentsShow.timesofDayController.createTOD tod

    # Faker Generate Meds
    for resident_id in [1]
      ResidentsShow.residentsController.createResident resident_id, Faker.Name.findName(), Date.create("#{Faker.Helpers.randomNumber(80).toString()} years ago").format('{MM}-{dd}-{yyyy}'), Faker.Helpers.randomize(genders()), Faker.Helpers.randomize(units()), Faker.Helpers.randomize(wings()), Faker.Helpers.randomize(rooms()), Faker.Helpers.randomize(beds())

      for med_id in [1..50]
        ResidentsShow.medicationsController.createMedication med_id, resident_id, Faker.Lorem.words(1)[0]

  </script>

<!-- End Document
================================================== -->
</body>
</html>